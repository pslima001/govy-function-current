{
  "version": "1.0.0",
  "created": "2026-02-17",
  "scope": "overlay",
  "tribunal": "tce-sp",
  "description": "Overlay TCE-SP: reforços de cabeçalho + desempate EPE vs Representação + reforço Relatório Fiscalização.",
  "globals": {
    "confidence": {
      "class_keep_min": 0.7
    }
  },
  "tabs": {
    "CLASSES": [
      {
        "id": "representacao",
        "patterns": {
          "strong": [
            "\\bREPRESENTANTE(S)?:\\b",
            "\\bREPRESENTAD[AO](S)?:\\b",
            "\\bRepresentante(s)?:\\b",
            "\\bRepresentada(s)?:\\b"
          ]
        }
      },
      {
        "id": "relatorio_fiscalizacao",
        "patterns": {
          "strong": [
            "\\bDIRETORIA\\s+DE\\s+FISCALIZA[CÇ][AÃ]O\\b",
            "\\bRELAT[ÓO]RIO\\s+T[ÉE]CNICO\\b"
          ]
        }
      }
    ],
    "PROCEDURES": [
      {
        "id": "exame_previo_edital",
        "patterns": {
          "strong": [
            "\\bEXAME\\s+PR[ÉE]VIO\\s+DE\\s+EDITAL\\b",
            "\\bEXAMES\\s+PR[ÉE]VIOS\\s+DE\\s+EDITAL\\b"
          ]
        }
      }
    ],
    "TIE_BREAKERS": [
      {
        "id": "tce_sp_epe_does_not_override_representacao",
        "enabled": true,
        "priority": 110,
        "when_all": [
          { "source": "text_head", "regex": "\\bEXAME\\s+PR[ÉE]VIO\\s+DE\\s+EDITAL\\b" },
          { "source": "text_head", "regex": "\\bREPRESENTANTE(S)?:\\b" },
          { "source": "text_head", "regex": "\\bREPRESENTAD[AO](S)?:\\b" }
        ],
        "then": [
          { "action": "force_primary_class", "class_id": "representacao" },
          { "action": "add_procedure", "procedure_id": "exame_previo_edital" }
        ],
        "notes": "No TCE-SP, Exame Prévio frequentemente é rito dentro de Representação; preserve Representação como classe principal."
      },
      {
        "id": "tce_sp_epe_alone_add_procedure",
        "enabled": true,
        "priority": 105,
        "when_all": [
          { "source": "text_head", "regex": "\\bEXAME\\s+PR[ÉE]VIO\\s+DE\\s+EDITAL\\b" }
        ],
        "then": [
          { "action": "add_procedure", "procedure_id": "exame_previo_edital" }
        ],
        "notes": "Mesmo sem bloco de partes, marcar procedure EPE."
      }
    ],
    "EQUIVALENCES": [
      {
        "id": "baseline_epe_plus_repr_equivalence",
        "enabled": true,
        "description": "Se baseline marcou EPE+Representação e rules marcou Representação + procedure EPE, tratar como equivalente (não divergência 'ruim').",
        "baseline_any_of": [["exame_previo_edital", "representacao"]],
        "rules_primary": "representacao",
        "requires_procedure": "exame_previo_edital"
      }
    ]
  },
  "meta": {
    "ruleset_id": "tce-sp-overlay-v1",
    "created_at": "2026-02-17T00:00:00Z",
    "title": "Overlay TCE-SP v1"
  }
}
