IyBnb3Z5L2FwaS9qdXJpc191cGxvYWQucHkKIyBFbmRwb2ludDogUE9TVCAvYXBpL2p1cmlzL3Vw
bG9hZAojIEFjZWl0YSBSVEYsIFBERiwgVFhULCBET0NYIHZpYSBiYXNlNjQgb3UgdGV4dG8gZGly
ZXRvCgppbXBvcnQgYXp1cmUuZnVuY3Rpb25zIGFzIGZ1bmMKaW1wb3J0IGpzb24KaW1wb3J0IGxv
Z2dpbmcKaW1wb3J0IG9zCmltcG9ydCBiYXNlNjQKaW1wb3J0IHJlCmltcG9ydCBwc3ljb3BnMgpp
bXBvcnQgb3BlbmFpCmZyb20gYW50aHJvcGljIGltcG9ydCBBbnRocm9waWMKCiMgQ29uZmlndXJh
Y2FvClBHX0hPU1QgPSAicG9zdGdyZXNxbGdvdnkta2IucG9zdGdyZXMuZGF0YWJhc2UuYXp1cmUu
Y29tIgpQR19EQiA9ICJnb3Z5X2tiIgpQR19VU0VSID0gInBnYWRtaW4iCgpkZWYgZ2V0X2RiX2Nv
bm5lY3Rpb24oKToKICAgIHJldHVybiBwc3ljb3BnMi5jb25uZWN0KAogICAgICAgIGhvc3Q9UEdf
SE9TVCwKICAgICAgICBkYXRhYmFzZT1QR19EQiwKICAgICAgICB1c2VyPVBHX1VTRVIsCiAgICAg
ICAgcGFzc3dvcmQ9b3MuZW52aXJvbi5nZXQoIlBHX1BBU1NXT1JEIiksCiAgICAgICAgc3NsbW9k
ZT0icmVxdWlyZSIKICAgICkKCgpkZWYgZXh0cmFjdF90ZXh0X2Zyb21fcnRmKHJ0Zl9jb250ZW50
KToKICAgICIiIkV4dHJhaSB0ZXh0byBwdXJvIGRlIGNvbnRldWRvIFJURi4iIiIKICAgIHRyeToK
ICAgICAgICAjIERlY29kaWZpY2FyIHNlIGZvciBieXRlcwogICAgICAgIGlmIGlzaW5zdGFuY2Uo
cnRmX2NvbnRlbnQsIGJ5dGVzKToKICAgICAgICAgICAgcnRmX2NvbnRlbnQgPSBydGZfY29udGVu
dC5kZWNvZGUoJ2xhdGluLTEnLCBlcnJvcnM9J2lnbm9yZScpCiAgICAgICAgCiAgICAgICAgIyBS
ZW1vdmVyIGdydXBvcyBSVEYgZGUgY29udHJvbGUKICAgICAgICB0ZXh0ID0gcnRmX2NvbnRlbnQK
ICAgICAgICAKICAgICAgICAjIFJlbW92ZXIgaGVhZGVyIFJURgogICAgICAgIHRleHQgPSByZS5z
dWIocidcXHJ0ZjEuKj9cXHZpZXdraW5kNCcsICcnLCB0ZXh0LCBmbGFncz1yZS5ET1RBTEwpCiAg
ICAgICAgCiAgICAgICAgIyBDb252ZXJ0ZXIgY2FyYWN0ZXJlcyBlc3BlY2lhaXMgUlRGCiAgICAg
ICAgcmVwbGFjZW1lbnRzID0gewogICAgICAgICAgICByIlxcJ2UxIjogImEiLCByIlxcJ2U5Ijog
ImUiLCByIlxcJ2VkIjogImkiLCByIlxcJ2YzIjogIm8iLCByIlxcJ2ZhIjogInUiLAogICAgICAg
ICAgICByIlxcJ2UwIjogImEiLCByIlxcJ2U4IjogImUiLCByIlxcJ2VjIjogImkiLCByIlxcJ2Yy
IjogIm8iLCByIlxcJ2Y5IjogInUiLAogICAgICAgICAgICByIlxcJ2UyIjogImEiLCByIlxcJ2Vh
IjogImUiLCByIlxcJ2VlIjogImkiLCByIlxcJ2Y0IjogIm8iLCByIlxcJ2ZiIjogInUiLAogICAg
ICAgICAgICByIlxcJ2UzIjogImEiLCByIlxcJ2Y1IjogIm8iLCByIlxcJ2U3IjogImMiLCByIlxc
J2M3IjogIkMiLAogICAgICAgICAgICByIlxcJ2MxIjogIkEiLCByIlxcJ2M5IjogIkUiLCByIlxc
J2NkIjogIkkiLCByIlxcJ2QzIjogIk8iLCByIlxcJ2RhIjogIlUiLAogICAgICAgICAgICByIlxc
J2MwIjogIkEiLCByIlxcJ2M4IjogIkUiLCByIlxcJ2NjIjogIkkiLCByIlxcJ2QyIjogIk8iLCBy
IlxcJ2Q5IjogIlUiLAogICAgICAgICAgICByIlxcJ2MyIjogIkEiLCByIlxcJ2NhIjogIkUiLCBy
IlxcJ2NlIjogIkkiLCByIlxcJ2Q0IjogIk8iLCByIlxcJ2RiIjogIlUiLAogICAgICAgICAgICBy
IlxcJ2MzIjogIkEiLCByIlxcJ2Q1IjogIk8iLAogICAgICAgICAgICByIlxcJ2JhIjogIm8iLCBy
IlxcJ2FhIjogImEiLCAgIyBvcmRpbmFscwogICAgICAgICAgICByIlxcJ2IwIjogIiBncmF1cyAi
LAogICAgICAgICAgICByIlxcJ2E3IjogIiBwYXJhZ3JhZm8gIiwKICAgICAgICAgICAgciJcXCc5
MyI6ICciJywgciJcXCc5NCI6ICciJywKICAgICAgICAgICAgciJcXCc5MSI6ICInIiwgciJcXCc5
MiI6ICInIiwKICAgICAgICAgICAgciJcXCc5NiI6ICItIiwgciJcXCc5NyI6ICItIiwKICAgICAg
ICAgICAgciJcXCc4NSI6ICIuLi4iLAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmb3IgcnRm
X2NvZGUsIGNoYXIgaW4gcmVwbGFjZW1lbnRzLml0ZW1zKCk6CiAgICAgICAgICAgIHRleHQgPSB0
ZXh0LnJlcGxhY2UocnRmX2NvZGUsIGNoYXIpCiAgICAgICAgCiAgICAgICAgIyBSZW1vdmVyIGNv
bWFuZG9zIFJURiByZXN0YW50ZXMKICAgICAgICB0ZXh0ID0gcmUuc3ViKHInXFxbYS16XStcZCpc
cz8nLCAnICcsIHRleHQpCiAgICAgICAgdGV4dCA9IHJlLnN1YihyJ1xcWypdJywgJycsIHRleHQp
CiAgICAgICAgdGV4dCA9IHJlLnN1YihyJ1x7fFx9JywgJycsIHRleHQpCiAgICAgICAgCiAgICAg
ICAgIyBMaW1wYXIgZXNwYWNvcyBleHRyYXMKICAgICAgICB0ZXh0ID0gcmUuc3ViKHInXHMrJywg
JyAnLCB0ZXh0KQogICAgICAgIHRleHQgPSB0ZXh0LnN0cmlwKCkKICAgICAgICAKICAgICAgICBy
ZXR1cm4gdGV4dAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dpbmcuZXJy
b3IoZiJFcnJvIGFvIGV4dHJhaXIgdGV4dG8gUlRGOiB7c3RyKGUpfSIpCiAgICAgICAgcmV0dXJu
ICIiCgoKZGVmIGV4dHJhY3RfdGV4dF9mcm9tX3BkZl9zaW1wbGUocGRmX2J5dGVzKToKICAgICIi
IkV4dHJhaSB0ZXh0byBkZSBQREYgdXNhbmRvIG1ldG9kbyBzaW1wbGVzIChzZW0gZGVwZW5kZW5j
aWFzIGV4dGVybmFzKS4iIiIKICAgIHRyeToKICAgICAgICAjIFRlbnRhciBleHRyYWlyIHRleHRv
IGRpcmV0YW1lbnRlIGRvIFBERgogICAgICAgIHRleHQgPSAiIgogICAgICAgIGNvbnRlbnQgPSBw
ZGZfYnl0ZXMuZGVjb2RlKCdsYXRpbi0xJywgZXJyb3JzPSdpZ25vcmUnKQogICAgICAgIAogICAg
ICAgICMgUHJvY3VyYXIgcG9yIHN0cmVhbXMgZGUgdGV4dG8KICAgICAgICBzdHJlYW1zID0gcmUu
ZmluZGFsbChyJ3N0cmVhbSguKj8pZW5kc3RyZWFtJywgY29udGVudCwgcmUuRE9UQUxMKQogICAg
ICAgIAogICAgICAgIGZvciBzdHJlYW0gaW4gc3RyZWFtczoKICAgICAgICAgICAgIyBFeHRyYWly
IHRleHRvIHZpc2l2ZWwKICAgICAgICAgICAgdGV4dF9wYXJ0cyA9IHJlLmZpbmRhbGwocidcKCgu
Kj8pXCknLCBzdHJlYW0pCiAgICAgICAgICAgIHRleHQgKz0gJyAnLmpvaW4odGV4dF9wYXJ0cykK
ICAgICAgICAKICAgICAgICAjIFNlIG5hbyBlbmNvbnRyb3UgdGV4dG8sIHBvZGUgc2VyIFBERiBj
b20gZW5jb2RpbmcgZGlmZXJlbnRlCiAgICAgICAgaWYgbGVuKHRleHQpIDwgMTAwOgogICAgICAg
ICAgICAjIFRlbnRhciBvdXRybyBtZXRvZG8gLSBCVC9FVCBibG9ja3MKICAgICAgICAgICAgYnRf
YmxvY2tzID0gcmUuZmluZGFsbChyJ0JUKC4qPylFVCcsIGNvbnRlbnQsIHJlLkRPVEFMTCkKICAg
ICAgICAgICAgZm9yIGJsb2NrIGluIGJ0X2Jsb2NrczoKICAgICAgICAgICAgICAgIHRqX3RleHRz
ID0gcmUuZmluZGFsbChyJ1xbKC4qPylcXVRKJywgYmxvY2spCiAgICAgICAgICAgICAgICBmb3Ig
dGogaW4gdGpfdGV4dHM6CiAgICAgICAgICAgICAgICAgICAgcGFydHMgPSByZS5maW5kYWxsKHIn
XCgoLio/KVwpJywgdGopCiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnICcuam9pbihwYXJ0
cykKICAgICAgICAKICAgICAgICByZXR1cm4gdGV4dC5zdHJpcCgpIGlmIHRleHQgZWxzZSBOb25l
CiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2luZy5lcnJv
cihmIkVycm8gYW8gZXh0cmFpciB0ZXh0byBQREY6IHtzdHIoZSl9IikKICAgICAgICByZXR1cm4g
Tm9uZQoKCmRlZiBleHRyYWN0X3RleHRfZnJvbV9kb2N4KGRvY3hfYnl0ZXMpOgogICAgIiIiRXh0
cmFpIHRleHRvIGRlIERPQ1ggKFpJUCBjb20gWE1MKS4iIiIKICAgIHRyeToKICAgICAgICBpbXBv
cnQgemlwZmlsZQogICAgICAgIGltcG9ydCBpbwogICAgICAgIAogICAgICAgICMgRE9DWCBlIHVt
IFpJUAogICAgICAgIHdpdGggemlwZmlsZS5aaXBGaWxlKGlvLkJ5dGVzSU8oZG9jeF9ieXRlcykp
IGFzIHpmOgogICAgICAgICAgICAjIExlciBkb2N1bWVudC54bWwKICAgICAgICAgICAgaWYgJ3dv
cmQvZG9jdW1lbnQueG1sJyBpbiB6Zi5uYW1lbGlzdCgpOgogICAgICAgICAgICAgICAgeG1sX2Nv
bnRlbnQgPSB6Zi5yZWFkKCd3b3JkL2RvY3VtZW50LnhtbCcpLmRlY29kZSgndXRmLTgnKQogICAg
ICAgICAgICAgICAgIyBFeHRyYWlyIHRleHRvIGVudHJlIHRhZ3MKICAgICAgICAgICAgICAgIHRl
eHQgPSByZS5zdWIocic8W14+XSs+JywgJyAnLCB4bWxfY29udGVudCkKICAgICAgICAgICAgICAg
IHRleHQgPSByZS5zdWIocidccysnLCAnICcsIHRleHQpCiAgICAgICAgICAgICAgICByZXR1cm4g
dGV4dC5zdHJpcCgpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICBsb2dnaW5nLmVycm9yKGYiRXJybyBhbyBleHRyYWlyIHRleHRvIERPQ1g6IHtz
dHIoZSl9IikKICAgICAgICByZXR1cm4gTm9uZQoKCmRlZiBwcm9jZXNzYXJfaW5mb3JtYXRpdm8o
dGV4dG86IHN0ciwgZm9udGU6IHN0cikgLT4gbGlzdDoKICAgICIiIlByb2Nlc3NhIHRleHRvIGRv
IGluZm9ybWF0aXZvIFRDVSBlIGV4dHJhaSBmaWNoYXMgY29tIENsYXVkZS4iIiIKICAgIAogICAg
Y2xpZW50ID0gQW50aHJvcGljKGFwaV9rZXk9b3MuZW52aXJvbi5nZXQoIkFOVEhST1BJQ19BUElf
S0VZIikpCiAgICAKICAgIHByb21wdCA9IGYiIiJBbmFsaXNlIGVzdGUgSW5mb3JtYXRpdm8gZGUg
TGljaXRhY29lcyBlIENvbnRyYXRvcyBkbyBUQ1UgZSBleHRyYWlhIGFzIGp1cmlzcHJ1ZGVuY2lh
cy4KClBhcmEgY2FkYSBhY29yZGFvIGVuY29udHJhZG8sIHJldG9ybmUgdW0gSlNPTiBjb206Ci0g
aWQ6ICJUQ1UtW251bWVyb10tW2Fub10iIChleDogIlRDVS0yMzUxLTIwMjMiKQotIGFjb3JkYW86
IG51bWVybyBjb21wbGV0byAoZXg6ICIyMzUxLzIwMjMtUGxlbmFyaW8iKQotIHJlbGF0b3I6IG5v
bWUgZG8gbWluaXN0cm8KLSBkYXRhOiBtZXMvYW5vCi0gY29sZWdpYWRvOiBQbGVuYXJpbywgUHJp
bWVpcmEgQ2FtYXJhIG91IFNlZ3VuZGEgQ2FtYXJhCi0gdGVtYV9wcmluY2lwYWw6IHVtIHRlbWEg
KGV4OiAiRm9ybWFsaXNtbyBtb2RlcmFkbyIsICJWaXN0b3JpYSB0ZWNuaWNhIiwgIkhhYmlsaXRh
Y2FvIikKLSB0ZW1hc19zZWN1bmRhcmlvczogbGlzdGEgZGUgdGVtYXMgcmVsYWNpb25hZG9zCi0g
cGFsYXZyYXNfY2hhdmU6IGxpc3RhIGRlIDUtMTAgdGVybW9zIHBhcmEgYnVzY2EKLSBlbWVudGE6
IHJlc3VtbyBkYSBkZWNpc2FvIChvIHRleHRvIGVtIG5lZ3JpdG8gbm8gaW5pY2lvKQotIGVudGVu
ZGltZW50bzogbGlzdGEgZGUgcmVncmFzIGV4dHJhaWRhcyAobyBxdWUgbyBUQ1UgZGVjaWRpdSkK
LSBjb250ZXh0bzogYnJldmUgZGVzY3JpY2FvIGRvIGNhc28KLSBjaXRhY2FvX2RpcmV0YTogdHJl
Y2hvIGltcG9ydGFudGUgcGFyYSBjaXRhciBlbSBwZXRpY29lcwotIHF1YW5kb191c2FyOiBsaXN0
YSBkZSBzaXR1YWNvZXMgcHJhdGljYXMgZGUgYXBsaWNhY2FvCi0gcXVhbmRvX25hb191c2FyOiBs
aXN0YSBkZSBzaXR1YWNvZXMgZW0gcXVlIE5BTyBzZSBhcGxpY2EKLSBsaW5rOiBVUkwgZG8gYWNv
cmRhbyBzZSBwcmVzZW50ZSBubyB0ZXh0bwoKVEVYVE8gRE8gSU5GT1JNQVRJVk86Cnt0ZXh0b1s6
MTUwMDBdfQoKUmVzcG9uZGEgQVBFTkFTIGNvbSBKU09OIHZhbGlkbyBubyBmb3JtYXRvOgp7eyJm
aWNoYXMiOiBbLi4uXX19CiIiIgoKICAgIHJlc3BvbnNlID0gY2xpZW50Lm1lc3NhZ2VzLmNyZWF0
ZSgKICAgICAgICBtb2RlbD0iY2xhdWRlLXNvbm5ldC00LTIwMjUwNTE0IiwKICAgICAgICBtYXhf
dG9rZW5zPTQwMDAsCiAgICAgICAgbWVzc2FnZXM9W3sicm9sZSI6ICJ1c2VyIiwgImNvbnRlbnQi
OiBwcm9tcHR9XQogICAgKQogICAgCiAgICByZXNwX3RleHQgPSByZXNwb25zZS5jb250ZW50WzBd
LnRleHQKICAgIHJlc3BfdGV4dCA9IHJlc3BfdGV4dC5yZXBsYWNlKCJgYGBqc29uIiwgIiIpLnJl
cGxhY2UoImBgYCIsICIiKS5zdHJpcCgpCiAgICAKICAgIHJlc3VsdCA9IGpzb24ubG9hZHMocmVz
cF90ZXh0KQogICAgZmljaGFzID0gcmVzdWx0LmdldCgiZmljaGFzIiwgW10pCiAgICAKICAgICMg
R2VyYXIgZW1iZWRkaW5ncyBlIHNhbHZhciBubyBiYW5jbwogICAgb3BlbmFpX2NsaWVudCA9IG9w
ZW5haS5PcGVuQUkoYXBpX2tleT1vcy5lbnZpcm9uLmdldCgiT1BFTkFJX0FQSV9LRVkiKSkKICAg
IGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpCiAgICBjdXIgPSBjb25uLmN1cnNvcigpCiAgICAK
ICAgIGZpY2hhc19zYWx2YXMgPSBbXQogICAgCiAgICBmb3IgZmljaGEgaW4gZmljaGFzOgogICAg
ICAgIHRyeToKICAgICAgICAgICAgZmljaGFbImZvbnRlIl0gPSBmb250ZQogICAgICAgICAgICBm
aWNoYVsic3RhdHVzIl0gPSAicGVuZGVudGUiCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEdl
cmFyIGVtYmVkZGluZyBkYSBlbWVudGEgKyBlbnRlbmRpbWVudG8KICAgICAgICAgICAgdGV4dG9f
ZW1iID0gZmljaGEuZ2V0KCJlbWVudGEiLCAiIikgKyAiICIgKyAiICIuam9pbihmaWNoYS5nZXQo
ImVudGVuZGltZW50byIsIFtdKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGVtYl9yZXNwb25z
ZSA9IG9wZW5haV9jbGllbnQuZW1iZWRkaW5ncy5jcmVhdGUoCiAgICAgICAgICAgICAgICBtb2Rl
bD0idGV4dC1lbWJlZGRpbmctMy1zbWFsbCIsCiAgICAgICAgICAgICAgICBpbnB1dD10ZXh0b19l
bWJbOjgwMDBdCiAgICAgICAgICAgICkKICAgICAgICAgICAgZW1iZWRkaW5nID0gZW1iX3Jlc3Bv
bnNlLmRhdGFbMF0uZW1iZWRkaW5nCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEluc2VyaXIg
bm8gYmFuY28KICAgICAgICAgICAgY3VyLmV4ZWN1dGUoIiIiCiAgICAgICAgICAgICAgICBJTlNF
UlQgSU5UTyBrYl9qdXJpc3BydWRlbmNpYSAKICAgICAgICAgICAgICAgIChpZCwgYWNvcmRhbywg
cmVsYXRvciwgZGF0YSwgdGlwb19wcm9jZXNzbywgY29sZWdpYWRvLCBmb250ZSwKICAgICAgICAg
ICAgICAgICB0ZW1hX3ByaW5jaXBhbCwgdGVtYXNfc2VjdW5kYXJpb3MsIHBhbGF2cmFzX2NoYXZl
LAogICAgICAgICAgICAgICAgIGVtZW50YSwgZW50ZW5kaW1lbnRvLCBjb250ZXh0bywgY2l0YWNh
b19kaXJldGEsCiAgICAgICAgICAgICAgICAgcXVhbmRvX3VzYXIsIHF1YW5kb19uYW9fdXNhciwg
YWNvcmRhb3NfcmVsYWNpb25hZG9zLAogICAgICAgICAgICAgICAgIHN0YXR1cywgbGluaywgZW1i
ZWRkaW5nKQogICAgICAgICAgICAgICAgVkFMVUVTICglcywgJXMsICVzLCAlcywgJXMsICVzLCAl
cywgJXMsICVzLCAlcywgJXMsICVzLCAlcywgJXMsICVzLCAlcywgJXMsICVzLCAlcywgJXMpCiAg
ICAgICAgICAgICAgICBPTiBDT05GTElDVCAoaWQpIERPIFVQREFURSBTRVQKICAgICAgICAgICAg
ICAgICAgICB0ZW1hX3ByaW5jaXBhbCA9IEVYQ0xVREVELnRlbWFfcHJpbmNpcGFsLAogICAgICAg
ICAgICAgICAgICAgIGVtZW50YSA9IEVYQ0xVREVELmVtZW50YSwKICAgICAgICAgICAgICAgICAg
ICBlbnRlbmRpbWVudG8gPSBFWENMVURFRC5lbnRlbmRpbWVudG8sCiAgICAgICAgICAgICAgICAg
ICAgYXR1YWxpemFkb19lbSA9IENVUlJFTlRfVElNRVNUQU1QCiAgICAgICAgICAgICIiIiwgKAog
ICAgICAgICAgICAgICAgZmljaGEuZ2V0KCJpZCIpLAogICAgICAgICAgICAgICAgZmljaGEuZ2V0
KCJhY29yZGFvIiksCiAgICAgICAgICAgICAgICBmaWNoYS5nZXQoInJlbGF0b3IiKSwKICAgICAg
ICAgICAgICAgIGZpY2hhLmdldCgiZGF0YSIpLAogICAgICAgICAgICAgICAgZmljaGEuZ2V0KCJ0
aXBvX3Byb2Nlc3NvIiksCiAgICAgICAgICAgICAgICBmaWNoYS5nZXQoImNvbGVnaWFkbyIpLAog
ICAgICAgICAgICAgICAgZmljaGEuZ2V0KCJmb250ZSIpLAogICAgICAgICAgICAgICAgZmljaGEu
Z2V0KCJ0ZW1hX3ByaW5jaXBhbCIpLAogICAgICAgICAgICAgICAgZmljaGEuZ2V0KCJ0ZW1hc19z
ZWN1bmRhcmlvcyIsIFtdKSwKICAgICAgICAgICAgICAgIGZpY2hhLmdldCgicGFsYXZyYXNfY2hh
dmUiLCBbXSksCiAgICAgICAgICAgICAgICBmaWNoYS5nZXQoImVtZW50YSIpLAogICAgICAgICAg
ICAgICAgZmljaGEuZ2V0KCJlbnRlbmRpbWVudG8iLCBbXSksCiAgICAgICAgICAgICAgICBmaWNo
YS5nZXQoImNvbnRleHRvIiksCiAgICAgICAgICAgICAgICBmaWNoYS5nZXQoImNpdGFjYW9fZGly
ZXRhIiksCiAgICAgICAgICAgICAgICBmaWNoYS5nZXQoInF1YW5kb191c2FyIiwgW10pLAogICAg
ICAgICAgICAgICAgZmljaGEuZ2V0KCJxdWFuZG9fbmFvX3VzYXIiLCBbXSksCiAgICAgICAgICAg
ICAgICBmaWNoYS5nZXQoImFjb3JkYW9zX3JlbGFjaW9uYWRvcyIsIFtdKSwKICAgICAgICAgICAg
ICAgIGZpY2hhLmdldCgic3RhdHVzIiwgInBlbmRlbnRlIiksCiAgICAgICAgICAgICAgICBmaWNo
YS5nZXQoImxpbmsiKSwKICAgICAgICAgICAgICAgIGVtYmVkZGluZwogICAgICAgICAgICApKQog
ICAgICAgICAgICAKICAgICAgICAgICAgZmljaGFzX3NhbHZhcy5hcHBlbmQoZmljaGEpCiAgICAg
ICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2lu
Zy5lcnJvcihmIkVycm8gYW8gc2FsdmFyIGZpY2hhIHtmaWNoYS5nZXQoJ2lkJyl9OiB7c3RyKGUp
fSIpCiAgICAKICAgIGNvbm4uY29tbWl0KCkKICAgIGN1ci5jbG9zZSgpCiAgICBjb25uLmNsb3Nl
KCkKICAgIAogICAgcmV0dXJuIGZpY2hhc19zYWx2YXMKCgpkZWYgbWFpbihyZXE6IGZ1bmMuSHR0
cFJlcXVlc3QpIC0+IGZ1bmMuSHR0cFJlc3BvbnNlOgogICAgIiIiSGFuZGxlciBwcmluY2lwYWwg
ZG8gZW5kcG9pbnQuIiIiCiAgICAKICAgIGxvZ2dpbmcuaW5mbygianVyaXNfdXBsb2FkIGNoYW1h
ZG8iKQogICAgCiAgICB0cnk6CiAgICAgICAgYm9keSA9IHJlcS5nZXRfanNvbigpCiAgICAgICAg
CiAgICAgICAgdGV4dG8gPSBib2R5LmdldCgidGV4dG8iLCAiIikKICAgICAgICBhcnF1aXZvX2Jh
c2U2NCA9IGJvZHkuZ2V0KCJhcnF1aXZvX2Jhc2U2NCIsICIiKQogICAgICAgIGZpbGVuYW1lID0g
Ym9keS5nZXQoImZpbGVuYW1lIiwgImRvY3VtZW50byIpCiAgICAgICAgZm9udGUgPSBib2R5Lmdl
dCgiZm9udGUiLCAiSW5mb3JtYXRpdm8gVENVIikKICAgICAgICAKICAgICAgICAjIFNlIHJlY2Vi
ZXUgYXJxdWl2byBlbSBiYXNlNjQsIGV4dHJhaXIgdGV4dG8KICAgICAgICBpZiBhcnF1aXZvX2Jh
c2U2NDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZmlsZV9ieXRlcyA9IGJhc2U2
NC5iNjRkZWNvZGUoYXJxdWl2b19iYXNlNjQpCiAgICAgICAgICAgICAgICBmaWxlbmFtZV9sb3dl
ciA9IGZpbGVuYW1lLmxvd2VyKCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYg
ZmlsZW5hbWVfbG93ZXIuZW5kc3dpdGgoJy5ydGYnKToKICAgICAgICAgICAgICAgICAgICB0ZXh0
byA9IGV4dHJhY3RfdGV4dF9mcm9tX3J0ZihmaWxlX2J5dGVzKQogICAgICAgICAgICAgICAgICAg
IGxvZ2dpbmcuaW5mbyhmIlJURiBleHRyYWlkbzoge2xlbih0ZXh0byl9IGNhcmFjdGVyZXMiKQog
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZWxpZiBmaWxlbmFtZV9sb3dlci5l
bmRzd2l0aCgnLnBkZicpOgogICAgICAgICAgICAgICAgICAgIHRleHRvID0gZXh0cmFjdF90ZXh0
X2Zyb21fcGRmX3NpbXBsZShmaWxlX2J5dGVzKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0
ZXh0bzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuSHR0cFJlc3BvbnNlKAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5kdW1wcyh7ImVycm9yIjogIk5hbyBmb2kg
cG9zc2l2ZWwgZXh0cmFpciB0ZXh0byBkbyBQREYuIFVzZSBSVEYgb3UgVFhULiJ9KSwKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPTQwMCwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG1pbWV0eXBlPSJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgICAgICAgICAg
ICAgICApCiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiUERGIGV4dHJhaWRvOiB7
bGVuKHRleHRvKX0gY2FyYWN0ZXJlcyIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAg
ICAgICBlbGlmIGZpbGVuYW1lX2xvd2VyLmVuZHN3aXRoKCcuZG9jeCcpOgogICAgICAgICAgICAg
ICAgICAgIHRleHRvID0gZXh0cmFjdF90ZXh0X2Zyb21fZG9jeChmaWxlX2J5dGVzKQogICAgICAg
ICAgICAgICAgICAgIGlmIG5vdCB0ZXh0bzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IGZ1bmMuSHR0cFJlc3BvbnNlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5kdW1w
cyh7ImVycm9yIjogIk5hbyBmb2kgcG9zc2l2ZWwgZXh0cmFpciB0ZXh0byBkbyBET0NYLiJ9KSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPTQwMCwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG1pbWV0eXBlPSJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgICAg
ICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiRE9DWCBleHRy
YWlkbzoge2xlbih0ZXh0byl9IGNhcmFjdGVyZXMiKQogICAgICAgICAgICAgICAgICAgIAogICAg
ICAgICAgICAgICAgZWxpZiBmaWxlbmFtZV9sb3dlci5lbmRzd2l0aCgnLnR4dCcpOgogICAgICAg
ICAgICAgICAgICAgIHRleHRvID0gZmlsZV9ieXRlcy5kZWNvZGUoJ3V0Zi04JywgZXJyb3JzPSdp
Z25vcmUnKQogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcuaW5mbyhmIlRYVCBsaWRvOiB7bGVu
KHRleHRvKX0gY2FyYWN0ZXJlcyIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgVGVudGFyIGNvbW8gdGV4dG8KICAgICAgICAg
ICAgICAgICAgICB0ZXh0byA9IGZpbGVfYnl0ZXMuZGVjb2RlKCd1dGYtOCcsIGVycm9ycz0naWdu
b3JlJykKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgICAgICAgICAgbG9nZ2luZy5lcnJvcihmIkVycm8gYW8gcHJvY2Vzc2FyIGFy
cXVpdm86IHtzdHIoZSl9IikKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLkh0dHBSZXNwb25z
ZSgKICAgICAgICAgICAgICAgICAgICBqc29uLmR1bXBzKHsiZXJyb3IiOiBmIkVycm8gYW8gcHJv
Y2Vzc2FyIGFycXVpdm86IHtzdHIoZSl9In0pLAogICAgICAgICAgICAgICAgICAgIHN0YXR1c19j
b2RlPTQwMCwKICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZT0iYXBwbGljYXRpb24vanNvbiIK
ICAgICAgICAgICAgICAgICkKICAgICAgICAKICAgICAgICBpZiBub3QgdGV4dG86CiAgICAgICAg
ICAgIHJldHVybiBmdW5jLkh0dHBSZXNwb25zZSgKICAgICAgICAgICAgICAgIGpzb24uZHVtcHMo
eyJlcnJvciI6ICJDYW1wbyAndGV4dG8nIG91ICdhcnF1aXZvX2Jhc2U2NCcgb2JyaWdhdG9yaW8i
fSksCiAgICAgICAgICAgICAgICBzdGF0dXNfY29kZT00MDAsCiAgICAgICAgICAgICAgICBtaW1l
dHlwZT0iYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgKQogICAgICAgIAogICAgICAgIGlm
IGxlbih0ZXh0bykgPCAxMDA6CiAgICAgICAgICAgIHJldHVybiBmdW5jLkh0dHBSZXNwb25zZSgK
ICAgICAgICAgICAgICAgIGpzb24uZHVtcHMoeyJlcnJvciI6IGYiVGV4dG8gbXVpdG8gY3VydG8g
KHtsZW4odGV4dG8pfSBjaGFycykuIFZlcmlmaXF1ZSBvIGFycXVpdm8uIn0pLAogICAgICAgICAg
ICAgICAgc3RhdHVzX2NvZGU9NDAwLAogICAgICAgICAgICAgICAgbWltZXR5cGU9ImFwcGxpY2F0
aW9uL2pzb24iCiAgICAgICAgICAgICkKICAgICAgICAKICAgICAgICAjIFByb2Nlc3NhciBjb20g
SUEKICAgICAgICBmaWNoYXMgPSBwcm9jZXNzYXJfaW5mb3JtYXRpdm8odGV4dG8sIGZvbnRlKQog
ICAgICAgIAogICAgICAgICMgUmVtb3ZlciBlbWJlZGRpbmdzIGRvIHJldG9ybm8KICAgICAgICBm
b3IgZmljaGEgaW4gZmljaGFzOgogICAgICAgICAgICBmaWNoYS5wb3AoImVtYmVkZGluZyIsIE5v
bmUpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGZ1bmMuSHR0cFJlc3BvbnNlKAogICAgICAgICAg
ICBqc29uLmR1bXBzKHsKICAgICAgICAgICAgICAgICJzdGF0dXMiOiAic3VjY2VzcyIsCiAgICAg
ICAgICAgICAgICAiZmljaGFzX2V4dHJhaWRhcyI6IGxlbihmaWNoYXMpLAogICAgICAgICAgICAg
ICAgInRleHRvX2V4dHJhaWRvX2NoYXJzIjogbGVuKHRleHRvKSwKICAgICAgICAgICAgICAgICJm
aWNoYXMiOiBmaWNoYXMKICAgICAgICAgICAgfSwgZW5zdXJlX2FzY2lpPUZhbHNlKSwKICAgICAg
ICAgICAgbWltZXR5cGU9ImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgKQogICAgICAgIAogICAg
ZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAgIHJldHVybiBmdW5jLkh0dHBSZXNw
b25zZSgKICAgICAgICAgICAganNvbi5kdW1wcyh7ImVycm9yIjogIkpTT04gaW52YWxpZG8ifSks
CiAgICAgICAgICAgIHN0YXR1c19jb2RlPTQwMCwKICAgICAgICAgICAgbWltZXR5cGU9ImFwcGxp
Y2F0aW9uL2pzb24iCiAgICAgICAgKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAg
IGxvZ2dpbmcuZXJyb3IoZiJFcnJvIGVtIGp1cmlzX3VwbG9hZDoge3N0cihlKX0iKQogICAgICAg
IHJldHVybiBmdW5jLkh0dHBSZXNwb25zZSgKICAgICAgICAgICAganNvbi5kdW1wcyh7ImVycm9y
Ijogc3RyKGUpfSksCiAgICAgICAgICAgIHN0YXR1c19jb2RlPTUwMCwKICAgICAgICAgICAgbWlt
ZXR5cGU9ImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgKQo=
